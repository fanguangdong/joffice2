FormFieldView=Ext.extend(Ext.Panel,{constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();FormFieldView.superclass.constructor.call(this,{id:"FormFieldView",title:"[FormField]管理",region:"center",layout:"border",items:[this.searchPanel,this.gridPanel]});},initUIComponents:function(){this.searchPanel=new HT.SearchPanel({layout:"form",region:"north",colNums:3,items:[{fieldLabel:"",name:"Q_tableId_L_EQ",flex:1,xtype:"numberfield"},{fieldLabel:"",name:"Q_fieldName_S_EQ",flex:1,xtype:"textfield"},{fieldLabel:"",name:"Q_fieldType_S_EQ",flex:1,xtype:"textfield"},{fieldLabel:"",name:"Q_isRequired_SN_EQ",flex:1,xtype:"numberfield"},{fieldLabel:"",name:"Q_fieldSize_N_EQ",flex:1,xtype:"numberfield"},{fieldLabel:"",name:"Q_fieldDscp_S_EQ",flex:1,xtype:"textfield"},{fieldLabel:"",name:"Q_isPrimary_SN_EQ",flex:1,xtype:"numberfield"},{fieldLabel:"",name:"Q_foreignKey_S_EQ",flex:1,xtype:"textfield"},{fieldLabel:"",name:"Q_foreignTable_S_EQ",flex:1,xtype:"textfield"},{fieldLabel:"",name:"Q_isList_SN_EQ",flex:1,xtype:"numberfield"},{fieldLabel:"",name:"Q_isQuery_SN_EQ",flex:1,xtype:"numberfield"}],buttons:[{text:"查询",scope:this,iconCls:"btn-search",handler:this.search},{text:"重置",scope:this,iconCls:"btn-reset",handler:this.reset}]});this.topbar=new Ext.Toolbar({items:[{iconCls:"btn-add",text:"添加[FormField]",xtype:"button",scope:this,handler:this.createRs},{iconCls:"btn-del",text:"删除[FormField]",xtype:"button",scope:this,handler:this.removeSelRs}]});this.gridPanel=new HT.GridPanel({region:"center",tbar:this.topbar,rowActions:true,id:"FormFieldGrid",url:__ctxPath+"/flow/listFormField.do",fields:[{name:"fieldId",type:"int"},"tableId","fieldName","fieldType","isRequired","fieldSize","fieldDscp","isPrimary","foreignKey","foreignTable","isList","isQuery"],columns:[{header:"fieldId",dataIndex:"fieldId",hidden:true},{header:"",dataIndex:"tableId"},{header:"",dataIndex:"fieldName"},{header:"",dataIndex:"fieldType"},{header:"",dataIndex:"isRequired"},{header:"",dataIndex:"fieldSize"},{header:"",dataIndex:"fieldDscp"},{header:"",dataIndex:"isPrimary"},{header:"",dataIndex:"foreignKey"},{header:"",dataIndex:"foreignTable"},{header:"",dataIndex:"isList"},{header:"",dataIndex:"isQuery"},new Ext.ux.grid.RowActions({header:"管理",width:100,actions:[{iconCls:"btn-del",qtip:"删除",style:"margin:0 3px 0 3px"},{iconCls:"btn-edit",qtip:"编辑",style:"margin:0 3px 0 3px"}],listeners:{scope:this,"action":this.onRowAction}})]});this.gridPanel.addListener("rowdblclick",this.rowClick);},reset:function(){this.searchPanel.getForm().reset();},search:function(){$search({searchPanel:this.searchPanel,gridPanel:this.gridPanel});},rowClick:function(b,a,c){b.getSelectionModel().each(function(d){new FormFieldForm({fieldId:d.data.fieldId}).show();});},createRs:function(){new FormFieldForm().show();},removeRs:function(a){$postDel({url:__ctxPath+"/flow/multiDelFormField.do",ids:a,grid:this.gridPanel});},removeSelRs:function(){$delGridRs({url:__ctxPath+"/flow/multiDelFormField.do",grid:this.gridPanel,idName:"fieldId"});},editRs:function(a){new FormFieldForm({fieldId:a.data.fieldId}).show();},onRowAction:function(c,a,d,e,b){switch(d){case"btn-del":this.removeRs.call(this,a.data.fieldId);break;case"btn-edit":this.editRs.call(this,a);break;default:break;}}});