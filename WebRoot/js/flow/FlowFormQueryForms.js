FlowFormQueryForms=Ext.extend(Ext.Panel,{constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();FlowFormQueryForms.superclass.constructor.call(this,{id:"FlowFormQueryForms",region:"center",border:false,layout:{type:"vbox",align:"stretch"},items:[this.searchPanel,this.gridPanel]});},initUIComponents:function(){this.searchPanel=new Ext.FormPanel({flex:1,frame:false,border:false,region:"north",layout:"hbox",layoutConfig:{padding:"5"},defaults:{margins:"4 4 4 4"},items:[{text:"表名",xtype:"label"},{fieldLabel:"",name:"Q_tableName_S_LK",xtype:"textfield"},{xtype:"button",text:"查询",iconCls:"search",scope:this,handler:this.search}]});this.store=new Ext.data.JsonStore({url:__ctxPath+"/flow/queryFormsFlowFormQuery.do",root:"result",totalProperty:"totalCounts",baseParams:{},remoteSort:true,fields:[{name:"tableId",type:"int"},"formDefId","tableName","tableKey","formDef"]});this.store.on("beforeload",function(b,c){var e={};if(this.searchPanel.getForm().getEl()){var d=Ext.Ajax.serializeForm(this.searchPanel.getForm().getEl());e=Ext.urlDecode(d);}e.start=0;if(b.baseParams.limit){e.limit=b.baseParams.limit;}else{e.limit=5;}b.baseParams=e;},this);this.store.load();this.rowActions=new Ext.ux.grid.RowActions({header:"管理",width:100,actions:[{iconCls:"btn-showDetail",qtip:"详细",style:"margin:0 5px 0 5px"}]});var a=new Ext.grid.ColumnModel({columns:[{header:"tableId",sortable:false,dataIndex:"tableId",hidden:true},{header:"所属表单",sortable:false,dataIndex:"formDef",renderer:function(b){if(b){return b.formTitle;}}},{header:"表名",sortable:false,dataIndex:"tableName"},{header:"表号",sortable:false,dataIndex:"tableKey"},this.rowActions],defaults:{sortable:true,menuDisabled:false,width:100}});this.gridPanel=new Ext.grid.GridPanel({flex:12,region:"center",store:this.store,cm:a,plugins:this.rowActions,viewConfig:{forceFit:true,autoFill:true},bbar:new HT.PagingBar({store:this.store})});},search:function(){$search({searchPanel:this.searchPanel,gridPanel:this.gridPanel});}});