FormDefForm=Ext.extend(Ext.Window,{constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();FormDefForm.superclass.constructor.call(this,{id:"FormDefFormWin",layout:"fit",items:this.formPanel,modal:true,height:500,width:650,maximizable:true,title:"新增/编辑表单信息",iconCls:"menu-form",buttonAlign:"center",buttons:[{text:"保存",iconCls:"btn-save",scope:this,handler:this.save},{text:"重置",iconCls:"btn-reset",scope:this,handler:this.reset},{text:"取消",iconCls:"btn-cancel",scope:this,handler:this.cancel}]});},initUIComponents:function(){this.formPanel=new Ext.FormPanel({layout:"form",bodyStyle:"padding:10px",border:false,autoScroll:true,defaults:{anchor:"96%,96%"},defaultType:"textfield",items:[{name:"formDef.formDefId",xtype:"hidden",value:this.formDefId==null?"":this.formDefId},{name:"defId",xtype:"hidden",value:this.defId==null?"":this.defId},{fieldLabel:"表单标题",name:"formDef.formTitle",allowBlank:false,maxLength:128},{fieldLabel:"描述",name:"formDef.formDesp",xtype:"textarea",maxLength:65535},{fieldLabel:"定义HTML",name:"formDef.defHtml",xtype:"fckeditor",anchor:"96%",width:490,height:250,maxLength:65535},{anchor:"96%",fieldLabel:"状态",hiddenName:"formDef.status",allowBlank:false,xtype:"combo",store:[["0","草稿"],["1","正式"]],mode:"local",editable:false,triggerAction:"all",emptyText:"--请选择表单状态--"}]});if(this.formDefId!=null&&this.formDefId!="undefined"){this.formPanel.loadData({url:__ctxPath+"/arch/getFormDef.do?formDefId="+this.formDefId,root:"data",preName:"formDef"});}},reset:function(){this.formPanel.getForm().reset();},cancel:function(){this.close();},save:function(){$postForm({formPanel:this.formPanel,scope:this,url:__ctxPath+"/flow/saveFormDef.do",callback:function(a,c){var b=Ext.getCmp("FormDefGrid");if(b!=null){b.getStore().reload();}this.close();}});}});