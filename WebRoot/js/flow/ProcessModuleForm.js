ProcessModuleForm=Ext.extend(Ext.Window,{constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();ProcessModuleForm.superclass.constructor.call(this,{id:"ProcessModuleFormWin",layout:"fit",items:this.formPanel,modal:true,height:240,width:500,maximizable:true,title:"流程模块详细信息",buttonAlign:"center",buttons:[{text:"保存",iconCls:"btn-save",scope:this,handler:this.save},{text:"重置",iconCls:"btn-reset",scope:this,handler:this.reset},{text:"取消",iconCls:"btn-cancel",scope:this,handler:this.cancel}]});},initUIComponents:function(){this.formPanel=new Ext.FormPanel({layout:"form",bodyStyle:"padding:10px",border:false,autoScroll:true,defaults:{anchor:"96%,96%"},defaultType:"textfield",items:[{name:"processModule.moduleid",xtype:"hidden",value:this.moduleid==null?"":this.moduleid},{fieldLabel:"模块名称",name:"processModule.modulename",allowBlank:false,maxLength:256},{fieldLabel:"模块key",name:"processModule.modulekey",allowBlank:false,maxLength:128,editable:true,lazyInit:false,forceSelection:false,xtype:"diccombo",itemName:"流程模块KEY"},{fieldLabel:"描述",name:"processModule.descp",xtype:"textarea",maxLength:4000},{xtype:"compositefield",fieldLabel:"绑定流程",items:[{xtype:"textfield",name:"proDefinition.processName",readOnly:true,width:"200"},{xtype:"button",iconCls:"menu-flow",text:"选择流程",handler:this.selectFlow.createCallback(this)}]},{fieldLabel:"defId",name:"processModule.defId",xtype:"hidden"},{fieldLabel:"流程key",xtype:"hidden",name:"processModule.processkey",maxLength:256},{fieldLabel:"创建人",xtype:"hidden",name:"processModule.creator",value:curUserInfo.fullname,maxLength:64}]});if(this.moduleid!=null&&this.moduleid!="undefined"){this.formPanel.loadData({url:__ctxPath+"/flow/getProcessModule.do?moduleid="+this.moduleid,root:"data",preName:"processModule"});}},reset:function(){this.formPanel.getForm().reset();},cancel:function(){this.close();},save:function(){$postForm({formPanel:this.formPanel,scope:this,url:__ctxPath+"/flow/saveProcessModule.do",callback:function(a,c){var b=Ext.getCmp("ProcessModuleGrid");if(b!=null){b.getStore().reload();}this.close();}});},selectFlow:function(a){FlowSelector.getView(function(d,b,c){a.getCmpByName("processModule.defId").setValue(d);a.getCmpByName("proDefinition.processName").setValue(b);a.getCmpByName("processModule.processkey").setValue(c);},true).show();}});