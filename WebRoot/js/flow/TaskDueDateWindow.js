TaskDueDateWindow=Ext.extend(Ext.Window,{constructor:function(a){Ext.applyIf(this,a);TaskDueDateWindow.superclass.constructor.call(this,{title:"为任务设置限期时间",height:120,width:350,layout:"form",modal:true,bodyStyle:"padding:5px",buttonAlign:"center",items:[{fieldLabel:"限期时间",xtype:"datetimefield",format:"Y-m-d H:i:s",name:"dueDate",anchor:"98%,98%",value:this.dueDate?this.dueDate:""}],buttons:[{text:"保存",iconCls:"btn-save",scope:this,handler:this.save},{text:"关闭",iconCls:"btn-cancel",scope:this,handler:this.close}]});},save:function(){var c=this.getCmpByName("dueDate");var a=this.taskGrid?this.taskGrid:Ext.getCmp("allTaskGrid");var b=a.getSelectionModel().getSelections();var f="";for(var d=0;d<b.length;d++){if(d>0){f+=",";}f+=b[d].data.taskId;}if(c.getValue()==""){Ext.ux.Toast.msg("操作信息","请填写日期数据！");return;}var e=Ext.util.Format.date(c.getValue(),"Y-m-d H:i:s");Ext.Ajax.request({url:__ctxPath+"/flow/dueTask.do",method:"POST",scope:this,params:{taskIds:f,dueDate:e},success:function(g,h){a.getStore().reload();},failure:function(g,h){this.close();}});this.close();}});