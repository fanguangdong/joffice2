SectionForm=Ext.extend(Ext.Window,{constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();SectionForm.superclass.constructor.call(this,{id:"SectionFormWin",layout:"fit",items:this.formPanel,modal:true,height:250,width:500,maximizable:true,title:"栏目详细信息",buttonAlign:"center",buttons:[{text:"保存",iconCls:"btn-save",scope:this,handler:this.save},{text:"重置",iconCls:"btn-reset",scope:this,handler:this.reset},{text:"取消",iconCls:"btn-cancel",scope:this,handler:this.cancel}]});},initUIComponents:function(){this.formPanel=new Ext.FormPanel({layout:"form",bodyStyle:"padding:10px",border:false,autoScroll:true,defaults:{anchor:"96%,96%"},defaultType:"textfield",items:[{name:"section.sectionId",xtype:"hidden",value:this.sectionId==null?"":this.sectionId},{fieldLabel:"栏目名称",name:"section.sectionName",allowBlank:false,maxLength:256},{fieldLabel:"栏目描述",name:"section.sectionDesc",xtype:"textarea",maxLength:1024},{fieldLabel:"栏目类型",hiddenName:"section.sectionType",allowBlank:false,xtype:"combo",editable:false,mode:"local",triggerAction:"all",store:[["1","一般栏目"],["2","桌面新闻"],["3","滚动公告"]],value:1},{fieldLabel:"状态",hiddenName:"section.status",allowBlank:false,xtype:"combo",editable:false,mode:"local",triggerAction:"all",store:[["0","禁用"],["1","激活"]],value:1}]});if(this.sectionId!=null&&this.sectionId!="undefined"){this.formPanel.loadData({url:__ctxPath+"/info/getSection.do?sectionId="+this.sectionId,root:"data",preName:"section"});}},reset:function(){this.formPanel.getForm().reset();},cancel:function(){this.close();},save:function(){$postForm({formPanel:this.formPanel,scope:this,url:__ctxPath+"/info/saveSection.do",callback:function(b,d){var c=Ext.getCmp("SectionGrid");if(c!=null){c.getStore().reload();}var a=Ext.getCmp("SectionView");var f=d.result.data;if(a!=null&&f!=null){var e=a.getCmpByName("FirstColumn");e.add(new Portlet({title:f.sectionName,sectionId:f.sectionId,sectionType:f.sectionType}));a.doLayout();}this.close();}});}});