DocFolderForm=Ext.extend(Ext.Window,{formPanel:null,constructor:function(a){Ext.applyIf(this,a);this.initUI();DocFolderForm.superclass.constructor.call(this,{id:"DocFolderFormWin",title:"目录详细信息",iconCls:"menu-mail_folder",width:400,height:220,modal:true,layout:"fit",border:false,buttonAlign:"center",items:[this.formPanel],buttons:this.buttons});},initUI:function(){this.formPanel=new Ext.FormPanel({url:__ctxPath+"/document/saveDocFolder.do",layout:"form",id:"DocFolderForm",defaults:{widht:400,anchor:"96%,96%"},bodyStyle:"padding:5px;",formId:"DocFolderFormId",defaultType:"textfield",items:[{name:"docFolder.folderId",id:"folderId",xtype:"hidden",value:this.folderId==null?"":this.folderId},{fieldLabel:"目录名称",name:"docFolder.folderName",id:"folderName",allowBlank:false},{fieldLabel:"描述",name:"docFolder.descp",id:"descp",xtype:"textarea"},{xtype:"hidden",name:"docFolder.parentId",id:"parentId",value:this.parentId},{xtype:"hidden",name:"docFolder.isShared",id:"isShared",value:this.isShared}]});this.buttons=[{xtype:"button",text:"保存",iconCls:"btn-save",scope:this,handler:this.saveRecord},{xtype:"button",text:"关闭",iconCls:"btn-close",scope:this,handler:function(){this.close();}}];if(this.folderId!=null&&this.folderId!="undefined"){this.formPanel.getForm().load({deferredRender:false,url:__ctxPath+"/document/getDocFolder.do?folderId="+this.folderId,waitMsg:"正在载入数据...",success:function(a,b){},failure:function(a,b){Ext.ux.Toast.msg("编辑","载入失败");}});}},saveRecord:function(){var a=this.formPanel;var b=this;if(a.getForm().isValid()){a.getForm().submit({method:"post",waitMsg:"正在提交数据...",success:function(e,g){Ext.ux.Toast.msg("操作信息","成功信息保存！");var h=Ext.getCmp("leftFolderPanel");var d=Ext.getCmp("leftTreePanel");var f=Ext.getCmp("DocFolderGrid");if(f!=null){f.getStore().reload();}if(h!=null){h.root.reload();}if(d!=null){d.root.reload();}var c=Ext.getCmp("PrivateDocumentView");if(c!=null){c.dataView.getStore().reload();}if(b.callback){b.callback.call(b);}b.close();},failure:function(c,d){Ext.MessageBox.show({title:"操作信息",msg:"信息保存出错，请联系管理员！",buttons:Ext.MessageBox.OK,icon:"ext-mb-error"});b.close();}});}}});