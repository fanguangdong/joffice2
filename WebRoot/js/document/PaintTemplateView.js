PaintTemplateView=Ext.extend(Ext.Panel,{constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();PaintTemplateView.superclass.constructor.call(this,{id:"PaintTemplateView",title:"套红模板管理",region:"center",iconCls:"menu-template",layout:"border",items:[this.searchPanel,this.gridPanel]});},initUIComponents:function(){this.searchPanel=new Ext.FormPanel({height:35,region:"north",frame:false,border:false,layout:"hbox",layoutConfig:{padding:"5",align:"middle"},defaults:{style:"padding:0px 5px 0px 5px;",border:false,anchor:"98%,98%",labelWidth:75,xtype:"label"},items:[{text:"模板名称："},{xtype:"textfield",name:"Q_templateName_S_LK"},{xtype:"button",text:"查询",scope:this,iconCls:"btn-search",handler:this.search},{xtype:"button",text:"重置",scope:this,iconCls:"btn-reset",handler:this.reset}]});this.topbar=new Ext.Toolbar({items:[{iconCls:"btn-add",text:"添加模板",xtype:"button",scope:this,handler:this.createRs},{iconCls:"btn-del",text:"删除模板",xtype:"button",scope:this,handler:this.removeSelRs}]});this.gridPanel=new HT.GridPanel({region:"center",tbar:this.topbar,rowActions:true,id:"PaintTemplateGrid",url:__ctxPath+"/document/listPaintTemplate.do",fields:[{name:"ptemplateId",type:"int"},"fileId","templateName","templateKey","path","isActivate","fileAttach","fileAttach.note"],columns:[{header:"ptemplateId",dataIndex:"ptemplateId",hidden:true},{header:"fileId",hidden:true,dataIndex:"fileId"},{header:"模板名称",dataIndex:"templateName"},{header:"模板Key",dataIndex:"templateKey"},{header:"文件大小",dataIndex:"fileAttach.note"},new Ext.ux.grid.RowActions({header:"管理",actions:[{iconCls:"btn-del",qtip:"删除",style:"margin:0 3px 0 3px"},{iconCls:"btn-edit-online",qtip:"在线修改",style:"margin:0 3px 0 3px"}],listeners:{scope:this,"action":this.onRowAction}})]});this.gridPanel.addListener("rowdblclick",this.rowClick);},reset:function(){this.searchPanel.getForm().reset();},search:function(){$search({searchPanel:this.searchPanel,gridPanel:this.gridPanel});},rowClick:function(b,a,c){b.getSelectionModel().each(function(d){new PaintTemplateForm({ptemplateId:d.data.ptemplateId}).show();});},createRs:function(){new DocumentTemplateForm().show();},removeRs:function(a){$postDel({url:__ctxPath+"/document/multiDelPaintTemplate.do",ids:a,grid:this.gridPanel});},removeSelRs:function(){$delGridRs({url:__ctxPath+"/document/multiDelPaintTemplate.do",grid:this.gridPanel,idName:"ptemplateId"});},editRs:function(a){new PaintTemplateForm({ptemplateId:a.data.ptemplateId}).show();},editOnline:function(a){new DocumentTemplateForm({ptemplateId:a.data.ptemplateId}).show();},onRowAction:function(c,a,d,e,b){switch(d){case"btn-del":this.removeRs.call(this,a.data.ptemplateId);break;case"btn-edit":this.editRs.call(this,a);break;case"btn-edit-online":this.editOnline.call(this,a);break;default:break;}}});