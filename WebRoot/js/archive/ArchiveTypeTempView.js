ArchiveTypeTempView=Ext.extend(Ext.Panel,{curTypeId:null,constructor:function(a){Ext.applyIf(this,a);this.initUIComponents();ArchiveTypeTempView.superclass.constructor.call(this,{id:"ArchiveTypeTempView",title:"公文分类及模板管理",layout:"border",iconCls:"menu-archive-template",scope:this,items:[this.leftTypePanel,this.archTemplateView]});},initUIComponents:function(){this.archTemplateView=new ArchTemplateView({allowEdit:true});var a=this.archTemplateView;var b=[{text:"新建分类",scope:this,iconCls:"btn-add",handler:function(){var e=this.leftTypePanel.selectedNode.id;var c="ARC_TEM_TYPE";var d=new GlobalTypeForm({parentId:e,catKey:c,callback:function(){Ext.getCmp("archivesTypeTree").root.reload();}});d.show();}},{text:"修改分类",scope:this,iconCls:"btn-edit",handler:function(){var c=this.leftTypePanel.selectedNode.id;var d=new GlobalTypeForm({proTypeId:c,callback:function(){Ext.getCmp("archivesTypeTree").root.reload();}});d.show();}}];this.leftTypePanel=new htsoft.ux.TreePanelEditor({region:"west",id:"archivesTypeTree",title:"公文分类",collapsible:true,split:true,width:200,url:__ctxPath+"/system/flowTreeGlobalType.do?catKey=ARC_TEM_TYPE",scope:this,onclick:function(e){var d=e.id;if(e.id==0){a.setTitle("所有模板");d=null;}else{a.setTitle("["+e.text+"]模板列表");}a.setTypeId(e.id);a.setTypeName(e.text);var c=a.gridPanel.getStore();c.url=__ctxPath+"/archive/listArchTemplate.do";c.baseParams={"Q_archivesType.proTypeId_L_EQ":d};c.params={start:0,limit:25};c.reload({params:{start:0,limit:25}});},contextMenuItems:b});}});